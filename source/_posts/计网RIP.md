---
title: 计网RIP
date: 2015-12-01 18:25:12
tags: 
    - ComputerNetwork
    - 很久以前系列
---

> 前段时间计算机网络实验课，老师说最后考的主要是RIP这部分，所以原理多看了看。
    

RIP，全称是路由信息协议，是TCP/IP环境下开发出的第一款内部网关路由协议。1988年被写入RFC1058。
有类、距离矢量动态路由协议。

    回忆有类和无类的概念：

	- 有类代表这个网络是按照主类进行计算，路由的传递不携带子网掩码，不能进行VLSM和CIDR：RIPv1
	- 无类代表这个网络不是按照主类进行计算，路由的传递携带子网掩码，可以进行VLSM和CIDR：RIPv2

距离矢量代表这个网络是按照传闻进行计算，每个路由器只知道目的网段的距离，路由的传递不携带结构信息，最短距离基于传闻：RIP、EIGRP、BGP      
    
链路状态代表这个网络是按照结构进行计算，区域内每个路由器都知道本域内的结构信息，最短距离基于SPF运算：OSPF
      
### RIP路由协议概述— RIP介绍
- 通过UDP进行封装，端口为520。      
- 数据包分为两种：request和response，周期性更新。- 管理距离为120，metric为跳数，16跳不可达。
- RIP公有的计时器有三个：update、invalid、flush
	- update：更新计时器，30s，RIP进程开始时计时，到期发送整个路由表（除水平分割内容外），永远持续。
	- invalid：失效计时器，180s，当相邻路由器发送的更新表项中存在这个路由条目时开始计时，到期显示possibly down，再次收到这个条目时重置
	- flush：刷新计时器，240s，当相邻路由器发送的更新表项中存在这个路由条目时开始计时，到期删除路由，再次收到这个条目时重置
- RIP的防环机制有六个：水平分割、最大跳数、路由毒化、毒性逆转、抑制更新计时器、触发更新
	- 水平分割：从某个接口收到的路由信息，不会从这个接口再发出去
	- 最大跳数：无论如何，RIP的路由条目在16跳时，就认为不可达
	- 路由毒化：一旦得知网段发生断连，则将网段路由条目的跳数记为16跳
	- 毒性逆转：当得到一个16跳的路由条目，就马上从收到的端口发回该16跳的条目
	- 抑制更新计时器：一个条目失效后，如果从原更新源出现了该条目更新，则抑制180s
	- 触发更新：一个条目发生变化后，无视周期性更新，直接将变化后的条目发出


### RIPv1和RIPv2的数据包结构
	- 不连续子网
	- 兼容
	- RIPv1使用广播更新，地址为255.255.255.255，自动边界汇总，不可关闭；
	- RIPv2使用组播更新，地址为224.0.0.9，自动边界汇总，可以关闭。


      在很多非以太网络中，链路的带宽不高，路由的周期性更新会对数据的传递造成较大影响，所以希望降低更新对链路的影响。

<strong>解决的办法：</strong>
- 增加周期性更新的更新计时器
- 设置触发更新
### 配置：
```
router(config)#interface serial0/0
router(config-if)#ip rip triggered
```

		
### open system interconnection reference model (OSI) vs TCP/IP
- TCP/IP
- 应用程序 - 操作系统 - 设备驱动网络接口
- 应用层 - HTTP DNS FTP SSH TELNET

### 以太网
Robert Metcalfe | Xerox Alto
论文 - 以太网：本地计算机网络的分布式交换
网卡 
Mac地址