---
title: dig-practice
date: 2024-03-13 11:39:15
tags:
---
`dig`是一个DNS查询工具，它用于向DNS服务器发送类型查询，并接收和显示响应。以下是`dig`命令返回结果的一些主要部分的解析：

1. `QUESTION SECTION`：这是你发送给DNS服务器的问题，通常包含你想要查询的域名和查询类型。
2. `ANSWER SECTION`：这是DNS服务器返回的答案，包含域名对应的记录。如果你查询的是A记录，那么这个部分会显示该域名对应的IP地址。
3. `AUTHORITY SECTION`：这个部分显示了为这个DNS查询提供权威答案的服务器。
4. `ADDITIONAL SECTION`：这个部分显示了额外的记录，如域名对应的mail exchange（MX）服务器等。
5. `Query time`：这个数字显示了整个查询过程所花费的毫秒数。
6. `SERVER`：这是你查询的DNS服务器的IP地址。
7. `WHEN`：这是查询的时间和日期。
8. `MSG SIZE`：这是DNS查询消息的大小，单位是字节。

使用`dig`命令时，可以使用各种查询类型，如A（寻找IPv4地址）、AAAA（寻找IPv6地址）、MX（寻找mail exchange服务器）、NS（寻找命名服务器）等。只需在`dig`命令后面加上查询类型和域名即可，例如：`dig A www.example.com`。


### A记录
当你使用CDN（内容分发网络）服务时，你的站点内容被复制到全球各地的许多数据中心。当用户请求你的站点时，DNS会将他们指向离他们最近的那个数据中心，从而加速内容的加载。

为了实现这个功能，CDN提供商通常会为你的域名配置多个A记录，每个记录都指向不同的数据中心的IP地址。当用户进行DNS查询时，DNS服务器会根据一些算法（如地理位置、网络拥塞、服务器负载等）从这些A记录中选择一个返回，以确保用户被指向最优的数据中心。

因此，使用了CDN服务的域名通常会有很多A记录，这也是为什么你会看到有很多A记录的原因。这就是CDN加速的基本工作原理之一。

###
前端域名被cname到一个负载均衡的域名上了


这是一种常见的设置。在云计算或大型网络环境中，经常会看到这样的设置。这种情况下，CNAME记录被用来把一个域名（常常是一个易于记忆的域名，或者是符合某种命名约定的域名）映射到一个可能会经常变化的IP地址上。

少数情况下，如果你的网站托管在多个服务器上以增加稳定性和可用性，负载均衡器会被用于在这些服务器之间均衡流量。在这种情况下，你可能会有一个负载均衡的域名，该域名会解析到负载均衡器的IP地址。然后，你可以使用CNAME记录将你的主要域名映射到这个负载均衡器域名，而不是直接映射到一个特定的IP地址。这样，如果负载均衡器的IP地址需要更改，你只需要更新负载均衡器域名的A记录，而不需要改动与你的主要域名相关的DNS记录。