<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ImaginingMe">
    <meta name="keyword"  content="frontend">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        重构-改善既有代码的设计-精读 - 前端技术分享 | AnitaK&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.0.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> DICHTEN == CONDENSARE </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="http://www.imaginingme.cn/img/avatar.jpeg" />
        </div>
        <div class="name">
            <i>ImaginingMe</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> DICHTEN == CONDENSARE </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        重构-改善既有代码的设计-精读
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2021-05-24 20:24:34</span></span>
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>第 1 章　重构，第 一个示例 1<br>1．1　起点 1<br>1．2　对此起始程序的评价 3<br>1．3　重构的第 一步 5<br>1．4　分解statement 函数 6<br>1．5　进展：大量嵌套函数 22<br>1．6　拆分计算阶段与格式化阶段 24<br>1．7　进展：分离到两个文件（和两个阶段） 31<br>1．8　按类型重组计算过程 34<br>1．9　进展：使用多态计算器来提供数据 41<br>1．10　结语 43<br>第 2 章　重构的原则 45<br>2．1　何谓重构 45<br>2．2　两顶帽子 46<br>2．3　为何重构 47<br>2．4　何时重构 50<br>2．5　重构的挑战 55<br>2．6　重构、架构和YAGNI 62<br>2．7　重构与软件开发过程 63<br>2．8　重构与性能 64<br>2．9　重构起源何处 67<br>2．10　自动化重构 68<br>2．11　延展阅读 70<br>第3 章　代码的坏味道 71<br>3．1　神秘命名（Mysterious Name） 72<br>3．2　重复代码（Duplicated Code） 72<br>3．3　过长函数（Long Function） 73<br>3．4　过长参数列表（Long Parameter List） 74<br>3．5　全局数据（Global Data） 74<br>3．6　可变数据（Mutable Data） 75<br>3．7　发散式变化（Divergent Change） 76<br>3．8　霰弹式修改（Shotgun Surgery） 76<br>3．9　依恋情结（Feature Envy） 77<br>3．10　数据泥团（Data Clumps） 78<br>3．11　基本类型偏执（Primitive Obsession） 78<br>3．12　重复的switch（Repeated Switches） 79<br>3．13　循环语句（Loops） 79<br>3．14　冗赘的元素（Lazy Element） 80<br>3．15　夸夸其谈通用性（Speculative Generality） 80<br>3．16　临时字段（Temporary Field） 80<br>3．17　过长的消息链（Message Chains） 81<br>3．18　中间人（Middle Man） 81<br>3．19　内幕交易（Insider Trading） 82<br>3．20　过大的类（Large Class） 82<br>3．21　异曲同工的类（Alternative Classes with Different Interfaces） 83<br>3．22　纯数据类（Data Class） 83<br>3．23　被拒绝的遗赠（Refused Bequest） 83<br>3．24　注释（Comments） 84<br>第4 章　构筑测试体系 85<br>4．1　自测试代码的价值 85<br>4．2　待测试的示例代码 87<br>4．3　第 一个测试 90<br>4．4　再添加一个测试 93<br>4．5　修改测试夹具 95<br>4．6　探测边界条件 96<br>4．7　测试远不止如此 99<br>第5 章　介绍重构名录 101<br>5．1　重构的记录格式 101<br>5．2　挑选重构的依据 102<br>第6 章　第 一组重构 105<br>6．1　提炼函数（Extract Function） 106<br>6．2　内联函数（Inline Function） 115<br>6．3　提炼变量（Extract Variable） 119<br>6．4　内联变量（Inline Variable） 123<br>6．5　改变函数声明（Change Function Declaration） 124<br>6．6　封装变量（Encapsulate Variable） 132<br>6．7　变量改名（Rename Variable） 137<br>6．8　引入参数对象（Introduce Parameter Object） 140<br>6．9　函数组合成类（Combine Functions into Class） 144<br>6．10　函数组合成变换（Combine Functions into Transform） 149<br>6．11　拆分阶段（Split Phase） 154<br>第7 章　封装 161<br>7．1　封装记录（Encapsulate Record） 162<br>7．2　封装集合（Encapsulate Collection） 170<br>7．3　以对象取代基本类型（Replace Primitive with Object） 174<br>7．4　以查询取代临时变量（Replace Temp with Query） 178<br>7．5　提炼类（Extract Class） 182<br>7．6　内联类（Inline Class） 186<br>7．7　隐藏委托关系（Hide Delegate） 189<br>7．8　移除中间人（Remove Middle Man） 192<br>7．9　替换算法（Substitute Algorithm） 195<br>第8 章　搬移特性 197<br>8．1　搬移函数（Move Function） 198<br>8．2　搬移字段（Move Field） 207<br>8．3　搬移语句到函数（Move Statements into Function） 213<br>8．4　搬移语句到调用者（Move Statements to Callers） 217<br>8．5　以函数调用取代内联代码（Replace Inline Code with Function Call） 222<br>8．6　移动语句（Slide Statements） 223<br>8．7　拆分循环（Split Loop） 227<br>8．8　以管道取代循环（Replace Loop with Pipeline） 231<br>8．9　移除死代码（Remove Dead Code） 237<br>第9 章　重新组织数据 239<br>9．1　拆分变量（Split Variable） 240<br>9．2　字段改名（Rename Field） 244<br>9．3　以查询取代派生变量（Replace Derived Variable with Query） 248<br>9．4　将引用对象改为值对象（Change Reference to Value） 252<br>9．5　将值对象改为引用对象（Change Value to Reference） 256<br>第 10 章　简化条件逻辑 259<br>10．1　分解条件表达式（Decompose Conditional） 260<br>10．2　合并条件表达式（Consolidate Conditional Expression） 263<br>10．3　以卫语句取代嵌套条件表达式（Replace Nested Conditional with Guard Clauses） 266<br>10．4　以多态取代条件表达式（Replace Conditional with Polymorphism） 272<br>10．5　引入特例（Introduce Special Case） 289<br>10．6　引入断言（Introduce Assertion） 302<br>第 11 章　重构API 305<br>11．1　将查询函数和修改函数分离（Separate Query from Modifier） 306<br>11．2　函数参数化（Parameterize Function） 310<br>11．3　移除标记参数（Remove Flag Argument） 314<br>11．4　保持对象完整（Preserve Whole Object） 319<br>11．5　以查询取代参数（Replace Parameter with Query） 324<br>11．6　以参数取代查询（Replace Query with Parameter） 327<br>11．7　移除设值函数（Remove Setting Method） 331<br>11．8　以工厂函数取代构造函数（Replace Constructor with Factory Function） 334<br>11．9　以命令取代函数（Replace Function with Command） 337<br>11．10　以函数取代命令（Replace Command with Function） 344<br>第 12 章　处理继承关系 349<br>12．1　函数上移（Pull Up Method） 350<br>12．2　字段上移（Pull Up Field） 353<br>12．3　构造函数本体上移（Pull Up Constructor Body） 355<br>12．4　函数下移（Push Down Method） 359<br>12．5　字段下移（Push Down Field） 361<br>12．6　以子类取代类型码（Replace Type Code with Subclasses） 362<br>12．7　移除子类（Remove Subclass） 369<br>12．8　提炼超类（Extract Superclass） 375<br>12．9　折叠继承体系（Collapse Hierarchy） 380<br>12．10　以委托取代子类（Replace Subclass with Delegate） 381<br>12．11　以委托取代超类（Replace Superclass with Delegate） 399</p>
<ul>
<li>一个持续不断的过程，过程自动化（高效，高质量）</li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/anitakym">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><p>京ICP备19049908号-1</p></a>
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
