<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ImaginingMe">
    <meta name="keyword"  content="frontend">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        electron入门参考指北 - 前端技术分享 | AnitaK&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.0.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> DICHTEN == CONDENSARE </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="http://www.imaginingme.cn/img/avatar.jpeg" />
        </div>
        <div class="name">
            <i>ImaginingMe</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98"><span class="toc-text">安装网络问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#learning-intro"><span class="toc-text">learning-intro</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#log"><span class="toc-text">log</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#electron-log"><span class="toc-text">electron-log</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8A%E6%97%B6%E5%85%B3%E6%B3%A8%E7%89%88%E6%9C%AC%E5%8F%91%E5%B8%83"><span class="toc-text">及时关注版本发布</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E5%88%A4%E6%96%AD"><span class="toc-text">网络问题判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sentry-error"><span class="toc-text">sentry - error</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preload"><span class="toc-text">Preload</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#download"><span class="toc-text">download</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%83%8C%E6%99%AF%E5%9B%BE"><span class="toc-text">安装背景图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%8F%82%E8%80%83%E4%BB%96%E4%BA%BA%E8%B8%A9%E5%9D%91%E6%96%87%E6%A1%A3"><span class="toc-text">可参考他人踩坑文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#app-builder"><span class="toc-text">app-builder</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#feature"><span class="toc-text">feature</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#webkit-app-region"><span class="toc-text">-webkit-app-region</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#window"><span class="toc-text">window</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mac%EF%BD%9Cwin"><span class="toc-text">Mac｜win</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#webContents"><span class="toc-text">webContents</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Canvas-Svg"><span class="toc-text">Canvas|Svg</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> DICHTEN == CONDENSARE </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        electron入门参考指北
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2021-03-03 18:52:07</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#electron" title="electron">electron</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>团队在electron方面的经验已经积累了2年多了，从较轻量级的客户端，到重量级的客户端；也不断有新同学想要学习或者加入相关项目的评审，这个时候回推荐一些相关的入门文档和demo,做个记录，之后可以直接扔链接了。</p>
<h3 id="安装网络问题"><a href="#安装网络问题" class="headerlink" title="安装网络问题"></a>安装网络问题</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">RequestError:</span> socket hang <span class="meta">up</span></span><br><span class="line">    <span class="meta">at</span> ClientRequest.&lt;anonymous&gt; </span><br><span class="line">    <span class="meta">at</span> Object<span class="number">.</span>onceWrapper (events<span class="number">.</span><span class="keyword">js</span>:<span class="number">483</span>:<span class="number">26</span>)</span><br><span class="line">    <span class="meta">at</span> ClientRequest<span class="number">.</span>emit (events<span class="number">.</span><span class="keyword">js</span>:<span class="number">388</span>:<span class="number">22</span>)</span><br><span class="line">    <span class="meta">at</span> ClientRequest<span class="number">.</span>origin<span class="number">.</span>emit </span><br><span class="line">    <span class="meta">at</span> TLSSocket<span class="number">.</span>socketOnEnd (_http_client<span class="number">.</span><span class="keyword">js</span>:<span class="number">499</span>:<span class="number">9</span>)</span><br><span class="line">    <span class="meta">at</span> TLSSocket<span class="number">.</span>emit (events<span class="number">.</span><span class="keyword">js</span>:<span class="number">388</span>:<span class="number">22</span>)</span><br><span class="line">    <span class="meta">at</span> endReadableNT (internal/streams/readable<span class="number">.</span><span class="keyword">js</span>:<span class="number">1336</span>:<span class="number">12</span>)</span><br><span class="line">    <span class="meta">at</span> processTicksAndRejections (internal/process/task_queues<span class="number">.</span><span class="keyword">js</span>:<span class="number">82</span>:<span class="number">21</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>保证网络即可</li>
</ul>
<h3 id="learning-intro"><a href="#learning-intro" class="headerlink" title="learning-intro"></a>learning-intro</h3><ul>
<li><a target="_blank" rel="noopener" href="https://electronjs.org/docs">https://electronjs.org/docs</a><br>文档啦，关于看文档，这儿推荐一本书，叫《如何阅读一本书》，讲得就是如何阅读的，其实我们好多人的阅读能力还停留在小学六年级水平，看了这本书，还是大有裨益。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/electron/electron-api-demos">https://github.com/electron/electron-api-demos</a><br>结合文档，跑一遍这个demo,对能做什么，做成什么样，就会有很直观的认知（electron官方出的）</li>
<li>electron fiddle <a target="_blank" rel="noopener" href="https://www.electronjs.org/fiddle">https://www.electronjs.org/fiddle</a><br>也是官方出的，可以试用功能，改代码查看功能，可以看看代码是否能在electron指定的版本上面运行</li>
<li>TIPS:<ul>
<li>webPreferences.nodeIntegration 这个选项的关闭还是开启需要注意（安全问题）_<a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/tutorial/security">https://www.electronjs.org/docs/tutorial/security</a> ,可以按照官方说明进行处理.<ul>
<li>⚠️ Under no circumstances should you load and execute remote code with Node.js integration enabled. Instead, use only local files (packaged together with your application) to execute Node.js code. To display remote content, use the <webview> tag or BrowserView, make sure to disable the nodeIntegration and enable contextIsolation.</li>
</ul>
</li>
<li>如果开启了nodeIntegration，用<script>引入jQuery就会有问题， jQuery内部会对require变量判断，和node的require冲突；所以只能<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">window</span>.$ = window.jQuery = require(&#x27;./jquery-<span class="number">3</span>.<span class="number">5</span>.<span class="number">1</span>.min)</span><br></pre></td></tr></table></figure>
新版本不可  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script><br>旧版本可以  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.4.1/jquery.min.js"></script><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.fn.jquery</span><br><span class="line"><span class="number">1.4</span><span class="number">.1</span></span><br><span class="line">$.fn.jquery</span><br><span class="line">VM338:<span class="number">1</span> Uncaught TypeError: Cannot read <span class="keyword">property</span> <span class="string">&#x27;jquery&#x27;</span> of undefined</span><br><span class="line">    at &lt;anonymous&gt;:<span class="number">1</span>:<span class="number">6</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><h4 id="electron-log"><a href="#electron-log" class="headerlink" title="electron-log"></a>electron-log</h4><p>文档：<a target="_blank" rel="noopener" href="https://github.com/megahertz/electron-log">https://github.com/megahertz/electron-log</a><br>By default, it writes logs to the following locations:</p>
<p>on Linux: ~/.config/{app name}/logs/{process type}.log<br>on macOS: ~/Library/Logs/{app name}/{process type}.log<br>on Windows: %USERPROFILE%\AppData\Roaming{app name}\logs{process type}.log</p>
<p>可以引入之后再封装一层</p>
<h3 id="及时关注版本发布"><a href="#及时关注版本发布" class="headerlink" title="及时关注版本发布"></a>及时关注版本发布</h3><p><a target="_blank" rel="noopener" href="https://www.electronjs.org/releases/stable">https://www.electronjs.org/releases/stable</a><br>版本更新解决了什么问题<br>比如对M1芯片的支持，big sur的支持等～</p>
<h3 id="网络问题判断"><a href="#网络问题判断" class="headerlink" title="网络问题判断"></a>网络问题判断</h3><p>online<br>offline<br>网络状态不好有两种情况：</p>
<ol>
<li>切断物理连接本身</li>
<li>网络本身有问题(如路由等具体问题)<br>嗯呢，navigator.onLine不完全可靠，无法检测网络真实状态，只能判断是否是物理切断连接<br>通用更可靠方案是：定时向服务器发起任意一个能够判断网络状态的请求，类似心跳连接</li>
</ol>
<p>Unfortunately, these events aren’t fully reliable. If you need greater reliability, or if the API isn’t implemented in the browser, you can use other signals to detect if you are offline including using service workers and responses from XMLHttpRequest.<br>————————————————————————<br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events">https://developer.mozilla.org/en-US/docs/Web/API/NavigatorOnLine/Online_and_offline_events</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/sindresorhus/is-online">https://github.com/sindresorhus/is-online</a></p>
<p><a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/tutorial/online-offline-events">https://www.electronjs.org/docs/tutorial/online-offline-events</a></p>
<h3 id="sentry-error"><a href="#sentry-error" class="headerlink" title="sentry - error"></a>sentry - error</h3><ul>
<li>Error: EBUSY: resource busy or locked<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The main reason you are seeing this error is due to a program putting a <span class="keyword">lock</span> <span class="keyword">on</span> the folder <span class="keyword">for</span> whatever reason. Testing the command <span class="keyword">while</span> closing programs one <span class="keyword">at</span> a <span class="built_in">time</span> can <span class="keyword">help</span> resolve the issue <span class="keyword">and</span> let you know which program <span class="keyword">is</span> the culprit.</span><br><span class="line">One issue people were <span class="keyword">having</span> was <span class="keyword">with</span> <span class="keyword">anti</span>-malware <span class="keyword">on</span> windows. You can <span class="keyword">read</span> <span class="keyword">through</span> this <span class="keyword">thread</span> here:</span><br><span class="line">https://github.com/npm/npm/issues/<span class="number">13461</span></span><br><span class="line"><span class="keyword">In</span> <span class="keyword">case</span> <span class="keyword">link</span> stops working here was the most upvoted <span class="keyword">comment</span>:</span><br><span class="line"><span class="keyword">In</span> Windows <span class="number">10</span> <span class="number">64</span>-<span class="built_in">bit</span> OS, I have resolved this issue <span class="keyword">by</span> uninstalling <span class="keyword">Anti</span>-Malware software. - 卸载杀毒软件</span><br><span class="line">Another way you can <span class="keyword">trigger</span> this <span class="keyword">error</span> <span class="keyword">is</span> <span class="keyword">if</span> you <span class="keyword">are</span> running an npm run [command] <span class="keyword">while</span> cd<span class="string">&#x27;d into the directory that its altering. This happened to me where I closed every program and it didn&#x27;</span>t <span class="keyword">work</span>, but realized I was inside the dist folder which needed <span class="keyword">to</span> be removed <span class="keyword">and</span> rebuilt. This triggered the <span class="keyword">Error</span>: EBUSY: <span class="keyword">resource</span> busy <span class="keyword">or</span> <span class="keyword">locked</span>, rmdir <span class="keyword">error</span> <span class="keyword">in</span> PowerShell <span class="keyword">and</span> can be reproduced every time.</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Preload"><a href="#Preload" class="headerlink" title="Preload"></a>Preload</h3><p>webPreferences-preload<br>(<a target="_blank" rel="noopener" href="https://www.electronjs.org/docs/api/browser-window">https://www.electronjs.org/docs/api/browser-window</a>)</p>
<h3 id="download"><a href="#download" class="headerlink" title="download"></a>download</h3><p>我们项目中基于downloadItem实现的<br>可以看看这个项目（@electron/get）的实现<a target="_blank" rel="noopener" href="https://github.com/electron/get">https://github.com/electron/get</a></p>
<h3 id="安装背景图"><a href="#安装背景图" class="headerlink" title="安装背景图"></a>安装背景图</h3><p>如果想要背景清楚，可以用二倍图，文件命名符合规则即可生效</p>
<pre>
Adopt the @2x Naming Convention
When you create a high-resolution version of an image, follow this naming convention for the image pair:

Standard: <ImageName>.<filename_extension>
Example: circle.png

High resolution: <ImageName>@2x.<filename_extension>
Example: circle@2x.png

The <ImageName> and <filename_extension> portions specify the name and extension for the file. The inclusion of the @2x modifier for the high-resolution image lets the system know that the image is the high-resolution variant of the standard image. The two component images should be in the same folder in the app’s sources. Ideally, package the image pairs into one file (see Package Multiple Versions of Image Resources into One File).
</pre>


<h3 id="可参考他人踩坑文档"><a href="#可参考他人踩坑文档" class="headerlink" title="可参考他人踩坑文档"></a>可参考他人踩坑文档</h3><p><a target="_blank" rel="noopener" href="https://www.yuque.com/arvinxx-fe/electron">https://www.yuque.com/arvinxx-fe/electron</a><br>本质还是项目中遇到问题，解决问题，有空了彻底解决问题</p>
<h3 id="app-builder"><a href="#app-builder" class="headerlink" title="app-builder"></a>app-builder</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/app-builder-bin">https://www.npmjs.com/package/app-builder-bin</a></li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app-builder</span><br><span class="line">Generic helper<span class="built_in"> tool </span><span class="keyword">to</span> build app <span class="keyword">in</span> a distributable formats. Used by electron-builder but applicable <span class="keyword">not</span> only <span class="keyword">for</span> building Electron applications</span><br></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/electron-userland/electron-builder">https://github.com/electron-userland/electron-builder</a><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">和<span class="keyword">node</span><span class="title">的版本有关 - 16</span>.X的时候</span><br><span class="line">reify:app-builder-bin: timing reifyNode:node_modules/typescript Completed <span class="keyword">in</span> <span class="number">6782ms</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="feature"><a href="#feature" class="headerlink" title="feature"></a>feature</h2><h4 id="webkit-app-region"><a href="#webkit-app-region" class="headerlink" title="-webkit-app-region"></a>-webkit-app-region</h4><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/electron/electron/issues/1354">https://github.com/electron/electron/issues/1354</a></li>
<li><a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/api/frameless-window">https://www.electronjs.org/zh/docs/latest/api/frameless-window</a></li>
<li>父元素设置了，子元素不想，可以重新设置下子元素的这个属性</li>
</ul>
<h4 id="window"><a href="#window" class="headerlink" title="window"></a>window</h4><ul>
<li>适时显示窗口</li>
<li>不规则窗口的设置</li>
<li>点击穿透透明区域 - trick</li>
<li>多窗口资源竞争问题 （渲染进程通信 - node-fs.watch - token令牌来控制文件读写）</li>
<li>模态窗口</li>
</ul>
<h4 id="Mac｜win"><a href="#Mac｜win" class="headerlink" title="Mac｜win"></a>Mac｜win</h4><ul>
<li>process.versions.electron</li>
<li>nativeTheme.shouldUseDarkColors</li>
</ul>
<h4 id="webContents"><a href="#webContents" class="headerlink" title="webContents"></a>webContents</h4><ul>
<li>监听页面事件</li>
<li>页面加载时间 ｜ 页面跳转事件-navigate|redirect</li>
<li>webFrame - 访问和控制子页面的对象</li>
<li>getFoucusedWebContents</li>
</ul>
<h4 id="Canvas-Svg"><a href="#Canvas-Svg" class="headerlink" title="Canvas|Svg"></a>Canvas|Svg</h4><ul>
<li>Canvas - 较小的画布上绘制大量元素，较强的频繁重绘能力 - 当绘制元素超出画布大小之后，绘制工作不再占用渲染资源</li>
<li>Svg - 大型渲染区域绘制少量元素，或者需要复杂事件交互逻辑的图形</li>
<li>Canvas - 线条变粗且颜色变淡的现象 - 计算机最小1px - 解决方案，宽度增加或者减少0.5个像素</li>
<li>PixiJS库</li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/anitakym">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><p>京ICP备19049908号-1</p></a>
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
