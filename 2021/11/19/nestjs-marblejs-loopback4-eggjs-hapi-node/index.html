<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ImaginingMe">
    <meta name="keyword"  content="frontend">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        nestjs-marblejs-loopback4-eggjs-hapi-node - 前端技术分享 | AnitaK&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 5.0.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> DICHTEN == CONDENSARE </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="http://www.imaginingme.cn/img/avatar.jpeg" />
        </div>
        <div class="name">
            <i>ImaginingMe</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Nest"><span class="toc-text">Nest</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#awesome"><span class="toc-text">awesome</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Egg"><span class="toc-text">Egg</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-text">日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-text">核心思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E5%AE%9A%E5%BC%8F%E5%BC%80%E5%8F%91-%E9%85%8D%E7%BD%AE%E9%A1%B9%E5%86%85%E9%83%A8%E7%BA%A6%E5%AE%9A-%E9%9C%80%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3%E9%85%8D%E7%BD%AE"><span class="toc-text">约定式开发 - 配置项内部约定 - 需查询文档配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hapi"><span class="toc-text">Hapi</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#serverless"><span class="toc-text">serverless</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> DICHTEN == CONDENSARE </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        nestjs-marblejs-loopback4-eggjs-hapi-node
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2021-11-19 16:07:59</span></span>
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="Nest"><a href="#Nest" class="headerlink" title="Nest"></a>Nest</h2><h3 id="awesome"><a href="#awesome" class="headerlink" title="awesome"></a>awesome</h3><ul>
<li><a target="_blank" rel="noopener" href="https://docs.nestjs.cn/8/awesome">https://docs.nestjs.cn/8/awesome</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.nestjs.com/">https://docs.nestjs.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/monstar-lab-bangladesh-engineering/why-i-choose-nestjs-over-other-node-js-frameworks-6cdbd083ae67">https://medium.com/monstar-lab-bangladesh-engineering/why-i-choose-nestjs-over-other-node-js-frameworks-6cdbd083ae67</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/389639059">https://zhuanlan.zhihu.com/p/389639059</a> - great!!!</li>
<li>they have cats !!</li>
<li>用于构建高效、可伸缩的服务端应用程序的渐进式 Node.js 框架</li>
<li>NestJS 的设计理念本身就是一个框架适配器，其主要功能是代理中间件和处理器到适当的特定库应用中，从而达到框架的独立性</li>
<li>TS  +  OOP（面向对象编程）FP（函数式编程） FRP（函数式响应编程）</li>
<li>模块加载方面使用 IoC 模式：模块容器 - 依赖注入(通过装饰器和元数据实现)</li>
<li>配套功能：鉴权、文档、微服务、CLI 工具</li>
</ul>
<h2 id="Egg"><a href="#Egg" class="headerlink" title="Egg"></a>Egg</h2><h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><ul>
<li><a target="_blank" rel="noopener" href="https://eggjs.org/zh-cn/core/logger.html">https://eggjs.org/zh-cn/core/logger.html</a></li>
<li>egg-logger</li>
<li>使用的时候知道什么日志什么意思，接入第三方的日志收集的时候，能对得上就行</li>
<li>egg-logrotator</li>
<li>日志同步写入内存，异步每隔一段时间(默认 1 秒)刷盘<h3 id="核心思想"><a href="#核心思想" class="headerlink" title="核心思想"></a>核心思想</h3></li>
<li><a target="_blank" rel="noopener" href="https://www.yuque.com/antfe/featured/gf0y3y">https://www.yuque.com/antfe/featured/gf0y3y</a></li>
<li>为企业级框架和应用而生</li>
<li>Classify</li>
<li>内置集群：使用 Cluster，自带进程守护、多进程以及进程间通讯等功能</li>
</ul>
<h3 id="约定式开发-配置项内部约定-需查询文档配置"><a href="#约定式开发-配置项内部约定-需查询文档配置" class="headerlink" title="约定式开发 - 配置项内部约定 - 需查询文档配置"></a>约定式开发 - 配置项内部约定 - 需查询文档配置</h3><h2 id="Hapi"><a href="#Hapi" class="headerlink" title="Hapi"></a>Hapi</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://hapi.dev/">https://hapi.dev/</a></p>
</li>
<li><p>可靠，安全，可读</p>
</li>
<li><p>Middleware(express) vs Plugins and Extensions(hapi)</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Middleware vs Plugins <span class="keyword">and</span> Extensions</span><br><span class="line"><span class="keyword">To</span> extend its functionality, Express <span class="keyword">uses</span> middleware. Middleware essentially <span class="keyword">is</span> a <span class="keyword">sequence</span> <span class="keyword">of</span> functions <span class="keyword">using</span> callbacks <span class="keyword">to</span> execute the next <span class="keyword">function</span>. The issue <span class="keyword">with</span> this <span class="keyword">is</span> <span class="keyword">as</span> your application grows <span class="keyword">in</span> size <span class="keyword">and</span> complexity, the <span class="keyword">order</span> at which middleware executes becomes more crucial <span class="keyword">and</span> more difficult <span class="keyword">to</span> maintain. Having a middleware execute before one it <span class="keyword">is</span> dependant <span class="keyword">on</span> will cause your application <span class="keyword">to</span> fail. hapi fixes this issue <span class="keyword">with</span> its robust plugin <span class="keyword">and</span> <span class="keyword">extension</span> system.</span><br><span class="line"></span><br><span class="line">Plugins allow you <span class="keyword">to</span> <span class="keyword">break</span> your application logic <span class="keyword">into</span> isolated pieces <span class="keyword">of</span> business logic, <span class="keyword">and</span> reusable utilities. <span class="keyword">Each</span> plugin comes <span class="keyword">with</span> its own dependencies which are explicitly specified <span class="keyword">in</span> the plugins themselves. This means you don<span class="string">&#x27;t have to install dependencies yourself to make your plugins work. You can either add an existing hapi plugin, or write your own. For a more extensive tutorial on plugins, please see the plugins tutorial.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Each request in hapi follows a predefined path, the request lifecycle. hapi has extension points that let you create custom functionality along the lifecycle. Extension points in hapi let you know the precise order at which your application will run. For more info, please see the hapi request lifecycle.</span></span><br></pre></td></tr></table></figure></li>
<li><p><a target="_blank" rel="noopener" href="https://hapi.dev/tutorials/expresstohapi/?lang=zh_CN">https://hapi.dev/tutorials/expresstohapi/?lang=zh_CN</a>  (express 和 hapi的比较，也是可以怎么从express迁移到hapi)</p>
</li>
<li><p>hapi其实常拿来和express，koa做比较，没什么最好的，只有最合适的</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/vendia/serverless-express">https://github.com/vendia/serverless-express</a></p>
</li>
<li><p>koa和express可见《nodejsWeb应用开发-精读》</p>
</li>
<li><p>v17是个比较大的不兼容的更新</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/hapijs/hapi/issues/3658">https://github.com/hapijs/hapi/issues/3658</a>  - 17.0.0 Release Notes</p>
</li>
<li><p>breaking changes | migration checklist</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">17</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">Release</span> Notesadditional information</span><br><span class="line"><span class="attribute">breaking</span> changes</span><br><span class="line"><span class="comment">#3665</span></span><br><span class="line"><span class="attribute">Rename</span> route &#x27;config&#x27; with &#x27;options&#x27;</span><br><span class="line"><span class="comment">#3663</span></span><br><span class="line"><span class="attribute">Loosen</span> sample and modify peer validator in the routeBase schema</span><br><span class="line"><span class="comment">#3662</span></span><br><span class="line"><span class="attribute">prerequisite</span> returning empty string yields null <span class="literal">on</span> the pre object of request</span><br><span class="line"><span class="comment">#3658</span></span><br><span class="line"><span class="attribute">17</span>.<span class="number">0</span>.<span class="number">0</span> Release Notes</span><br><span class="line"><span class="comment">#3657</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/vise to <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3656</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/topo to <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3655</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/podium to <span class="number">3</span>.<span class="number">1</span>.<span class="number">2</span> from <span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"><span class="comment">#3653</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/nigel to <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">2</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3652</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/mimos to <span class="number">4</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">3</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"><span class="comment">#3651</span></span><br><span class="line"><span class="attribute">Update</span> jshttp/mime-db to <span class="number">1</span>.<span class="number">31</span>.<span class="number">0</span> from <span class="number">1</span>.<span class="number">29</span>.<span class="number">0</span></span><br><span class="line"><span class="comment">#3650</span></span><br><span class="line"><span class="attribute">Update</span> hueniverse/iron to <span class="number">5</span>.<span class="number">0</span>.<span class="number">4</span> from <span class="number">4</span>.<span class="number">0</span>.<span class="number">5</span></span><br><span class="line"><span class="comment">#3649</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/hoek to <span class="number">5</span>.<span class="number">0</span>.<span class="number">2</span> from <span class="number">4</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"><span class="comment">#3648</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/cryptiles to <span class="number">4</span>.<span class="number">1</span>.<span class="number">0</span> from <span class="number">3</span>.<span class="number">1</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3647</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/content to <span class="number">4</span>.<span class="number">0</span>.<span class="number">3</span> from <span class="number">3</span>.<span class="number">0</span>.<span class="number">6</span></span><br><span class="line"><span class="comment">#3646</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/catbox-memory to <span class="number">3</span>.<span class="number">1</span>.<span class="number">1</span> from <span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line"><span class="comment">#3645</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/catbox to <span class="number">10</span>.<span class="number">0</span>.<span class="number">2</span> from <span class="number">7</span>.<span class="number">1</span>.<span class="number">5</span></span><br><span class="line"><span class="comment">#3644</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/call to <span class="number">5</span>.<span class="number">0</span>.<span class="number">1</span> from <span class="number">4</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3643</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/boom to <span class="number">7</span>.<span class="number">1</span>.<span class="number">1</span> from <span class="number">5</span>.<span class="number">2</span>.<span class="number">0</span></span><br><span class="line"><span class="comment">#3642</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/b<span class="number">64</span> to <span class="number">4</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">3</span>.<span class="number">0</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3641</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/ammo to <span class="number">3</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">2</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line"><span class="comment">#3640</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/accept to <span class="number">3</span>.<span class="number">0</span>.<span class="number">2</span> from <span class="number">2</span>.<span class="number">1</span>.<span class="number">4</span></span><br><span class="line"><span class="comment">#3639</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/statehood to <span class="number">6</span>.<span class="number">0</span>.<span class="number">5</span> from <span class="number">5</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"><span class="comment">#3638</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/shot to <span class="number">4</span>.<span class="number">0</span>.<span class="number">3</span> from <span class="number">3</span>.<span class="number">4</span>.<span class="number">2</span></span><br><span class="line"><span class="comment">#3637</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/heavy to <span class="number">6</span>.<span class="number">0</span>.<span class="number">0</span> from <span class="number">4</span>.<span class="number">0</span>.<span class="number">4</span></span><br><span class="line"><span class="comment">#3636</span></span><br><span class="line"><span class="attribute">Update</span> hapijs/wreck to <span class="number">14</span>.<span class="number">0</span>.<span class="number">2</span> from <span class="number">13</span>.<span class="number">0</span>.<span class="number">3</span></span><br><span class="line"><span class="comment">#3635</span></span><br><span class="line"><span class="attribute">Expose</span> payload and credentials to dynamic scopes</span><br><span class="line"><span class="comment">#3634</span></span><br><span class="line"><span class="attribute">onCredentials</span> ext point</span><br><span class="line"><span class="comment">#3633</span></span><br><span class="line"><span class="attribute">Separate</span> authorization (<span class="number">403</span>) from authentication (<span class="number">401</span>)</span><br><span class="line"><span class="comment">#3632</span></span><br><span class="line"><span class="attribute">Add</span> negative test <span class="literal">on</span> registering plugin twice without `once`</span><br><span class="line"><span class="comment">#3631</span></span><br><span class="line"><span class="attribute">When</span> event data is an error, field name is error</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="serverless"><a href="#serverless" class="headerlink" title="serverless"></a>serverless</h4><ul>
<li><p>通过屏蔽细节，让业务开发更容易</p>
</li>
<li><p>把能在多个业务复用的东西下沉，屏蔽细节</p>
</li>
<li><p>好的框架 - 把复杂的，通用的东西下沉（less化），实现渐进式</p>
</li>
<li><p>云函数（渐进式，serverless -&gt; 屏蔽服务器细节）</p>
</li>
</ul>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">赞赏</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/anitakym">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><p>京ICP备19049908号-1</p></a>
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>  Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
